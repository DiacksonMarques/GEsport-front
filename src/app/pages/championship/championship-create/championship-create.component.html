<main class="container-fluid p-3">
  <form [formGroup]="formTeam" (ngSubmit)="onSubmit()" #formDirective="ngForm">
    @if(messageSuccess == false){
      <div class="row justify-content-center">
        <mat-card class="col-11">
          <mat-card-header>
            <mat-card-title class="d-flex align-items-center">
              <mat-icon class="mat-18">how_to_reg</mat-icon>
              Pré-inscrição Copa ACE
            </mat-card-title>
            <mat-card-subtitle>Tela para fazer a sua pré-inscrição para demostra o seu interesse!</mat-card-subtitle>
          </mat-card-header>

          <mat-card-content class="py-2">
            <div class="row justify-content-center">
              <div class="col-sm-12 col-md-11 col-lg-8 col-12">
                <mat-form-field class="w-100" appearance="outline">
                  <mat-label>Nome do time</mat-label>
                  <input matInput formControlName="name" placeholder="Digite o nome do time">
                  @if(formTeam.controls['name'].errors?.['required']){
                    <mat-error>Este campo é obrigatório</mat-error>
                  }
                </mat-form-field>
              </div>
            </div>

            <div class="row justify-content-center">
              <div class="col-sm-4 col-md-3 col-lg-2 col-12">
                <mat-form-field class="w-100" appearance="outline">
                  <mat-label>Sigla do Time</mat-label>
                  <input matInput formControlName="acronym" mask="AAA" placeholder="Sigla para transmissão">
                  @if(formTeam.controls['acronym'].errors?.['required']){
                    <mat-error>Este campo é obrigatório</mat-error>
                  }
                </mat-form-field>
              </div>
              <div class="col-sm-4 col-md-4 col-lg-3 col-12">
                <mat-form-field class="w-100" appearance="outline">
                  <mat-label>Categoria</mat-label>
                  <mat-select formControlName="category">
                    <mat-option value="AMB">Adulto e Sub-19</mat-option>
                    <mat-option value="ADL">Adulto</mat-option>
                    <mat-option value="SUB">Sub-19</mat-option>
                  </mat-select>
                  @if(formTeam.controls['category'].errors?.['required']){
                    <mat-error>Este campo é obrigatório</mat-error>
                  }
                </mat-form-field>
              </div>
              <div class="col-sm-4 col-md-4 col-lg-3 col-12">
                <mat-form-field class="w-100" appearance="outline">
                  <mat-label>Naipe</mat-label>
                  <mat-select formControlName="naipe">
                    <mat-option value="AMB">Masc e Femi</mat-option>
                    <mat-option value="MASCULINO">Masculino</mat-option>
                    <mat-option value="FEMININO">Feminina</mat-option>
                  </mat-select>
                  @if(formTeam.controls['naipe'].errors?.['required']){
                    <mat-error>Este campo é obrigatório</mat-error>
                  }
                </mat-form-field>
              </div>
            </div>

            <div class="row justify-content-center" formGroupName="city">
              <div class="col-sm-8 col-md-8 col-lg-6 col-12">
                <mat-form-field class="w-100" appearance="outline">
                  <mat-label>Cidade</mat-label>
                  <input matInput formControlName="name" placeholder="Digite o nome do time">
                  @if(formTeam.get('city.name')?.errors?.['required']){
                    <mat-error>Este campo é obrigatório</mat-error>
                  }
                </mat-form-field>
              </div>
              <div class="col-sm-4 col-md-3 col-lg-2 col-12">
                <mat-form-field class="w-100" appearance="outline">
                  <mat-label>UF</mat-label>
                  <input matInput formControlName="uf" mask="AA" placeholder="Digite o nome do time">
                  @if(formTeam.get('city.uf')?.errors?.['required']){
                    <mat-error>Este campo é obrigatório</mat-error>
                  }
                </mat-form-field>
              </div>
            </div>

            <div class="row justify-content-center" formGroupName="responsible">
              <div class="col-sm-7 col-md-6 col-lg-4 col-12">
                <mat-form-field class="w-100" appearance="outline">
                  <mat-label>Nome do responsável</mat-label>
                  <input matInput formControlName="name" placeholder="Digite o nome do time">
                  @if(formTeam.get('responsible.name')?.errors?.['required']){
                    <mat-error>Este campo é obrigatório</mat-error>
                  }
                </mat-form-field>
              </div>
              <div class="col-sm-5 col-md-5 col-lg-4 col-12">
                <mat-form-field class="w-100" appearance="outline">
                  <mat-label>Celular do responsável</mat-label>
                  <input matInput formControlName="phone" mask="(00) 0 0000-0000" placeholder="Digite o celular">
                  @if(formTeam.get('responsible.phone')?.errors?.['required']){
                    <mat-error>Este campo é obrigatório</mat-error>
                  }
                </mat-form-field>
              </div>
            </div>

            <div class="row justify-content-center">
              <div class="col-sm-12 col-md-8 col-lg-7 col-12">
                <button-loading
                  [loading]="loadingSubmitForm"
                  [type]="'submit'"
                  [color]="'primary'"
                  [disabled]="formTeam.invalid"
                  [description]="'Confirma pré-inscrição'"
                  [iconNext]="'arrow_forward'"
                  [class]="'w-100'">
                </button-loading>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
    } @else if(messageSuccess == true){
      <div class="row justify-content-center">
        <div class="col-sm-12 col-md-11 col-lg-8 col-12">
          <mat-card class="w-100">
            <mat-card-header>
              <div mat-card-avatar class="example-header-image">
                <img src="../../../assets/images/logo.png" width="35" alt="">
              </div>
              <mat-card-title>Pré-inscrição concluída</mat-card-title>
              <mat-card-subtitle>2º COPA ACE VOLEIBOL</mat-card-subtitle>
            </mat-card-header>
            <mat-divider></mat-divider>
            <mat-card-content class="my-2">
              <div class="card color-card">
                <div class="row justify-content-center">
                  <div class="col-12 p-5 d-flex justify-content-center">
                    <mat-icon class="scale-icon color-success">check_circle_outline</mat-icon>
                  </div>
                  <p class="text-center fs-3 color-primary">Pré-inscrição foi finalizada com sucesso</p>
                  <p class="text-center fs-4 color-primary">Número da pré-inscrição: {{registration.enrollment}}</p>
                </div>
              </div>

              <div class="row justify-content-center py-2">
                <div class="col-sm-12 col-md-11 col-lg-8 col-12">
                  <button-loading
                    [loading]="loadingSubmitForm"
                    [type]="'button'"
                    [color]="'primary'"
                    [description]="'Fazer outra inscrição'"
                    [iconNext]="'arrow_forward'"
                    [class]="'w-100'"
                    (click)="newRegistrarion(formDirective)">
                  </button-loading>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    }
  </form>
</main>
